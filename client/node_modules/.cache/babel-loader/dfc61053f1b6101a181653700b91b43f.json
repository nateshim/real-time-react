{"ast":null,"code":"var _jsxFileName = \"/Users/nathanaelshim/Desktop/pixit/client/src/UserNavigation.js\";\nimport React, { useEffect, useContext, useState } from 'react';\nimport { useLocation, useHistory } from 'react-router-dom';\nimport { withStyles, createStyles } from '@material-ui/styles';\nimport axios from 'axios';\nimport { Box, Button, Container, Typography, Avatar, Menu, MenuItem } from '@material-ui/core';\nimport logo from './static/logo.png';\nimport { Link } from 'react-router-dom';\nimport { AuthContext } from './context/AuthContext';\nimport fox from './static/fox.png';\nimport racoon from './static/racoon.png';\nimport snake from './static/snake.png';\n\nconst UserNavigation = props => {\n  const classes = props.classes;\n  const [anchorEl, setAnchorEl] = useState(null);\n  const user_id = new URLSearchParams(useLocation().search).get('id');\n  const [userSprite, setUserSprite] = useState(0);\n  const history = useHistory();\n  const spritePaths = {\n    0: racoon,\n    1: snake,\n    2: fox\n  };\n  const user = useContext(AuthContext);\n\n  const handleLogout = async event => {\n    var _response;\n\n    event.preventDefault();\n    let response;\n\n    try {\n      response = await axios.post('/auth/logout', {\n        headers: {\n          'Content-Type': 'application/json'\n        }\n      });\n      user.setUser(null);\n    } catch (err) {\n      console.log(err);\n      authContext.setUser(null);\n    }\n\n    if ((_response = response) === null || _response === void 0 ? void 0 : _response.data.path) history.push(response.data.path);else history.push('/');\n  };\n\n  const handleClick = event => {\n    setAnchorEl(event.currentTarget);\n  };\n\n  const handleClose = () => {\n    setAnchorEl(null);\n  };\n\n  useEffect(() => {\n    const getUser = async () => {\n      var _response2;\n\n      let response;\n\n      try {\n        response = await axios.post('/api/user', JSON.stringify({\n          user_id\n        }), {\n          headers: {\n            'Content-Type': 'application/json'\n          }\n        });\n      } catch (err) {\n        console.log(err);\n      }\n\n      if (response) {\n        setUserSprite(response.data.user.spriteid);\n      }\n\n      if ((_response2 = response) === null || _response2 === void 0 ? void 0 : _response2.data.path) window.location.href = response.data.path;else history.push(`/user/?id=${user_id}`);\n    };\n\n    getUser();\n  }, []);\n  return /*#__PURE__*/React.createElement(Box, {\n    className: classes.backgroundContainer,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 74,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(Button, {\n    component: Link,\n    to: '/',\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 75,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"img\", {\n    alt: \"logo\",\n    className: classes.logo,\n    src: logo,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 76,\n      columnNumber: 17\n    }\n  })), /*#__PURE__*/React.createElement(Container, {\n    className: classes.userAuth,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 78,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(Button, {\n    component: Link,\n    to: '/editor',\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 79,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(Typography, {\n    className: classes.text,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 80,\n      columnNumber: 21\n    }\n  }, \"Start Pixeling\")), /*#__PURE__*/React.createElement(Button, {\n    component: Link,\n    \"aria-controls\": \"simple menu\",\n    \"aria-haspopup\": \"true\",\n    onClick: handleClick,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 84,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(Avatar, {\n    src: spritePaths[userSprite],\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 85,\n      columnNumber: 21\n    }\n  })), /*#__PURE__*/React.createElement(Menu, {\n    classes: {\n      paper: classes.appBar\n    },\n    id: \"simple-menu\",\n    anchorEl: anchorEl,\n    keepMounted: true,\n    elevation: 0,\n    getContentAnchorEl: null,\n    anchorOrigin: {\n      vertical: 'bottom',\n      horizontal: 'center'\n    },\n    transformOrigin: {\n      vertical: 'top',\n      horizontal: 'center'\n    },\n    open: Boolean(anchorEl),\n    onClose: handleClose,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 87,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(MenuItem, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 105,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(Button, {\n    component: Link,\n    onClick: handleLogout,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 106,\n      columnNumber: 25\n    }\n  }, \"Logout\")))));\n};\n\nconst useStyles = theme => createStyles({\n  appBar: {\n    backgroundColor: '#fff2f2'\n  },\n  backgroundContainer: {\n    display: 'flex',\n    [theme.breakpoints.down('xs')]: {\n      display: 'grid'\n    },\n    backgroundSize: 'cover',\n    background: theme.palette.primary.main,\n    overflowX: 'hidden',\n    borderBottom: `1px solid ${theme.palette.text.primary}`\n  },\n  logo: {\n    padding: '1rem'\n  },\n  userAuth: {\n    display: 'flex',\n    justifyContent: 'flex-end'\n  },\n  text: {\n    paddingLeft: '1rem',\n    paddingRight: '1rem'\n  }\n});\n\nexport default withStyles(useStyles)(UserNavigation);","map":{"version":3,"sources":["/Users/nathanaelshim/Desktop/pixit/client/src/UserNavigation.js"],"names":["React","useEffect","useContext","useState","useLocation","useHistory","withStyles","createStyles","axios","Box","Button","Container","Typography","Avatar","Menu","MenuItem","logo","Link","AuthContext","fox","racoon","snake","UserNavigation","props","classes","anchorEl","setAnchorEl","user_id","URLSearchParams","search","get","userSprite","setUserSprite","history","spritePaths","user","handleLogout","event","preventDefault","response","post","headers","setUser","err","console","log","authContext","data","path","push","handleClick","currentTarget","handleClose","getUser","JSON","stringify","spriteid","window","location","href","backgroundContainer","userAuth","text","paper","appBar","vertical","horizontal","Boolean","useStyles","theme","backgroundColor","display","breakpoints","down","backgroundSize","background","palette","primary","main","overflowX","borderBottom","padding","justifyContent","paddingLeft","paddingRight"],"mappings":"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","sourcesContent":["import React, {useEffect, useContext, useState} from 'react';\nimport {useLocation, useHistory} from 'react-router-dom';\nimport {withStyles, createStyles} from '@material-ui/styles';\nimport axios from 'axios';\nimport {\n    Box,\n    Button,\n    Container,\n    Typography,\n    Avatar,\n    Menu,\n    MenuItem,\n} from '@material-ui/core';\nimport logo from './static/logo.png';\nimport {Link} from 'react-router-dom';\nimport {AuthContext} from './context/AuthContext';\nimport fox from './static/fox.png';\nimport racoon from './static/racoon.png';\nimport snake from './static/snake.png';\nconst UserNavigation = (props) => {\n    const classes = props.classes;\n    const [anchorEl, setAnchorEl] = useState(null);\n\n    const user_id = new URLSearchParams(useLocation().search).get('id');\n    const [userSprite, setUserSprite] = useState(0);\n    const history = useHistory();\n    const spritePaths = {\n        0 : racoon,\n        1 : snake,\n        2 : fox,\n    };\n    const user = useContext(AuthContext);\n\n    const handleLogout = async (event) => {\n        event.preventDefault();\n        let response;\n        try {\n            response = await axios.post('/auth/logout', {\n                headers: {'Content-Type' : 'application/json'}\n            });\n            user.setUser(null);\n        } catch (err) {\n            console.log(err);\n            authContext.setUser(null);\n        }\n        if (response?.data.path) history.push(response.data.path);\n        else history.push('/');\n    }\n    const handleClick = (event) => {\n        setAnchorEl(event.currentTarget);\n    };\n    const handleClose = () => {\n        setAnchorEl(null);\n    };\n    useEffect(() => {\n        const getUser = async() => {\n            let response;\n            try {\n                response = await axios.post('/api/user', JSON.stringify({user_id}), {\n                    headers: {'Content-Type' : 'application/json'}\n                });\n            } catch (err) {\n                console.log(err);\n            }\n            if (response) { \n                setUserSprite(response.data.user.spriteid);\n            }\n            if (response?.data.path) window.location.href = response.data.path;\n            else history.push(`/user/?id=${user_id}`)\n        } \n        getUser();\n    }, [])\n    return (\n        <Box className={classes.backgroundContainer}>\n            <Button component={Link} to={'/'}>\n                <img alt=\"logo\" className={classes.logo} src={logo}/>\n            </Button>\n            <Container className={classes.userAuth}>\n                <Button component={Link} to={'/editor'}>\n                    <Typography className={classes.text}>\n                        Start Pixeling\n                    </Typography>\n                </Button>\n                <Button component={Link} aria-controls=\"simple menu\" aria-haspopup=\"true\" onClick={handleClick}>\n                    <Avatar src = {spritePaths[userSprite]}/>\n                </Button>\n                <Menu\n                    classes={{paper: classes.appBar}}\n                    id=\"simple-menu\"\n                    anchorEl={anchorEl}\n                    keepMounted\n                    elevation={0}\n                    getContentAnchorEl={null}\n                    anchorOrigin={{\n                        vertical: 'bottom',\n                        horizontal: 'center',\n                    }}\n                    transformOrigin={{\n                        vertical: 'top',\n                        horizontal: 'center',\n                    }}\n                    open={Boolean(anchorEl)}\n                    onClose={handleClose}\n                >\n                    <MenuItem>\n                        <Button component={Link} onClick={handleLogout}>Logout</Button>\n                    </MenuItem>\n                </Menu>\n            </Container>\n        </Box>\n    );\n}\n\nconst useStyles = (theme) => createStyles({\n    appBar: {\n        backgroundColor: '#fff2f2',\n    },\n    backgroundContainer: {\n        display: 'flex',\n        [theme.breakpoints.down('xs')]: {\n            display: 'grid',\n        },\n        backgroundSize: 'cover',\n        background: theme.palette.primary.main,\n        overflowX: 'hidden',\n        borderBottom: `1px solid ${theme.palette.text.primary}`\n    },\n   logo: {\n        padding: '1rem',\n    },\n    userAuth: {\n        display: 'flex',\n        justifyContent: 'flex-end',\n    },\n    text: {\n       paddingLeft: '1rem',\n       paddingRight: '1rem',\n    }\n});\n\nexport default withStyles(useStyles)(UserNavigation);"]},"metadata":{},"sourceType":"module"}