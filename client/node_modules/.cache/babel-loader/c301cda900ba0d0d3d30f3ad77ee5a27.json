{"ast":null,"code":"export default class History {\n  constructor(maxLength = 99, undoStack = [], redoStack = []) {\n    this.maxLength = maxLength;\n    this.undoStack = undoStack;\n    this.redoStack = redoStack;\n  }\n\n  push(delta) {\n    this.undoStack = [...this.undoStack.splice(-this.maxLength), delta];\n    this.redoStack = [];\n  }\n\n  prev() {\n    const delta = this.undoStack.pop();\n\n    if (!delta) {\n      return undefined;\n    }\n\n    const {\n      next: prev,\n      prev: next\n    } = delta;\n    this.redoStack.push({\n      next,\n      prev\n    });\n    return next;\n  }\n\n  next() {\n    const delta = this.redoStack.pop();\n\n    if (!delta) {\n      return undefined;\n    }\n\n    const {\n      next: prev,\n      prev: next\n    } = delta;\n    this.undoStack = [...this.undoStack.splice(-this.maxLength), {\n      next,\n      prev\n    }];\n    return next;\n  }\n\n  squash() {\n    this.undoStack = [...this.undoStack.slice(0, -2), this.undoStack.slice(-2).reduce((acc, delta) => ({\n      prev: [...delta.prev, ...acc.prev],\n      next: [...delta.next, ...acc.next]\n    }), {\n      prev: [],\n      next: []\n    })];\n  }\n\n}","map":{"version":3,"sources":["/Users/nathanaelshim/Desktop/real-time-react/client/node_modules/@curtishughes/pixel-editor/dist/History.js"],"names":["History","constructor","maxLength","undoStack","redoStack","push","delta","splice","prev","pop","undefined","next","squash","slice","reduce","acc"],"mappings":"AAAA,eAAe,MAAMA,OAAN,CAAc;AACzBC,EAAAA,WAAW,CAACC,SAAS,GAAG,EAAb,EAAiBC,SAAS,GAAG,EAA7B,EAAiCC,SAAS,GAAG,EAA7C,EAAiD;AACxD,SAAKF,SAAL,GAAiBA,SAAjB;AACA,SAAKC,SAAL,GAAiBA,SAAjB;AACA,SAAKC,SAAL,GAAiBA,SAAjB;AACH;;AACDC,EAAAA,IAAI,CAACC,KAAD,EAAQ;AACR,SAAKH,SAAL,GAAiB,CAAC,GAAG,KAAKA,SAAL,CAAeI,MAAf,CAAsB,CAAC,KAAKL,SAA5B,CAAJ,EAA4CI,KAA5C,CAAjB;AACA,SAAKF,SAAL,GAAiB,EAAjB;AACH;;AACDI,EAAAA,IAAI,GAAG;AACH,UAAMF,KAAK,GAAG,KAAKH,SAAL,CAAeM,GAAf,EAAd;;AACA,QAAI,CAACH,KAAL,EAAY;AACR,aAAOI,SAAP;AACH;;AACD,UAAM;AAAEC,MAAAA,IAAI,EAAEH,IAAR;AAAcA,MAAAA,IAAI,EAAEG;AAApB,QAA6BL,KAAnC;AACA,SAAKF,SAAL,CAAeC,IAAf,CAAoB;AAAEM,MAAAA,IAAF;AAAQH,MAAAA;AAAR,KAApB;AACA,WAAOG,IAAP;AACH;;AACDA,EAAAA,IAAI,GAAG;AACH,UAAML,KAAK,GAAG,KAAKF,SAAL,CAAeK,GAAf,EAAd;;AACA,QAAI,CAACH,KAAL,EAAY;AACR,aAAOI,SAAP;AACH;;AACD,UAAM;AAAEC,MAAAA,IAAI,EAAEH,IAAR;AAAcA,MAAAA,IAAI,EAAEG;AAApB,QAA6BL,KAAnC;AACA,SAAKH,SAAL,GAAiB,CAAC,GAAG,KAAKA,SAAL,CAAeI,MAAf,CAAsB,CAAC,KAAKL,SAA5B,CAAJ,EAA4C;AAAES,MAAAA,IAAF;AAAQH,MAAAA;AAAR,KAA5C,CAAjB;AACA,WAAOG,IAAP;AACH;;AACDC,EAAAA,MAAM,GAAG;AACL,SAAKT,SAAL,GAAiB,CACb,GAAG,KAAKA,SAAL,CAAeU,KAAf,CAAqB,CAArB,EAAwB,CAAC,CAAzB,CADU,EAEb,KAAKV,SAAL,CAAeU,KAAf,CAAqB,CAAC,CAAtB,EAAyBC,MAAzB,CAAgC,CAACC,GAAD,EAAMT,KAAN,MAAiB;AAC7CE,MAAAA,IAAI,EAAE,CAAC,GAAGF,KAAK,CAACE,IAAV,EAAgB,GAAGO,GAAG,CAACP,IAAvB,CADuC;AAE7CG,MAAAA,IAAI,EAAE,CAAC,GAAGL,KAAK,CAACK,IAAV,EAAgB,GAAGI,GAAG,CAACJ,IAAvB;AAFuC,KAAjB,CAAhC,EAGI;AAAEH,MAAAA,IAAI,EAAE,EAAR;AAAYG,MAAAA,IAAI,EAAE;AAAlB,KAHJ,CAFa,CAAjB;AAOH;;AApCwB","sourcesContent":["export default class History {\n    constructor(maxLength = 99, undoStack = [], redoStack = []) {\n        this.maxLength = maxLength;\n        this.undoStack = undoStack;\n        this.redoStack = redoStack;\n    }\n    push(delta) {\n        this.undoStack = [...this.undoStack.splice(-this.maxLength), delta];\n        this.redoStack = [];\n    }\n    prev() {\n        const delta = this.undoStack.pop();\n        if (!delta) {\n            return undefined;\n        }\n        const { next: prev, prev: next } = delta;\n        this.redoStack.push({ next, prev });\n        return next;\n    }\n    next() {\n        const delta = this.redoStack.pop();\n        if (!delta) {\n            return undefined;\n        }\n        const { next: prev, prev: next } = delta;\n        this.undoStack = [...this.undoStack.splice(-this.maxLength), { next, prev }];\n        return next;\n    }\n    squash() {\n        this.undoStack = [\n            ...this.undoStack.slice(0, -2),\n            this.undoStack.slice(-2).reduce((acc, delta) => ({\n                prev: [...delta.prev, ...acc.prev],\n                next: [...delta.next, ...acc.next],\n            }), { prev: [], next: [] }),\n        ];\n    }\n}\n"]},"metadata":{},"sourceType":"module"}